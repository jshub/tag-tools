<h1 id="config_name"><%= @tag_configuration.name %></h1>

<fieldset id="data_capture_plugins">

<h2>Data capture plugins</h2>

<% if @tag_configuration.plugins.include? mf_plugin %>
  <p class="plugin_name" id="<%= mf_plugin.name.downcase %>">
  	Page data html microformats
  </p>
	<small>Collects basic information about the page, from html microformat markup on the page.</small>
<% end %>

<% if @tag_configuration.plugins.include? ga_markup_plugin %>
  <p class="plugin_name" id="<%= ga_markup_plugin.name.downcase %>">
    Google Analytics markup capture
  </p>
	<small>
	  Collects basic basic page view information from existing Google Analytics tags on the
	  page. This plugin does <em>not</em> replace the Google tag, and does not require any
	  configuration.
	</small>
<% end %>

<% unless @tag_configuration.has_markup_plugins? %>
  <p>None</p>
<% end %>

</fieldset>

  <hr />
  
<fieldset id="data_transport_plugins">

<h2>Data transport plugins</h2>

<% if @tag_configuration.plugins.include? causata_plugin %>
  <p class="plugin_name" id="<%= causata_plugin.name.downcase %>">
    <%= causata_plugin.name %> data transport <br />
  </p>
	<small>Sends information to the Causata server.</small>

  <div id="configure_plugin_<%= causata_plugin.id %>">
  	<% unless value_for_plugin_param(:causata, :server_url).nil? %>
    <p class="plugin_param" id="server_url">
      <span class="label">Server URL:</span>
      <span class="value"><%= value_for_plugin_param(:causata, :server_url) %></span>
    </p>
	<% end %>
  	<% unless value_for_plugin_param(:causata, :account_id).nil? %>
    <p class="plugin_param" id="account_id">
      <span class="label">Account ID:</span>
      <span class="value"><%= value_for_plugin_param(:causata, :account_id) %></span>
	</p>
	<% end %>
  </div>
<% end %>  
  
<% if @tag_configuration.plugins.include? piwik_plugin %>
  <p class="plugin_name" id="<%= piwik_plugin.name.downcase %>">
    Piwik web analytics <br />  	
  </p>
	<small>Sends information to the Piwik web analytics service.</small>

  <div id="configure_plugin_<%= piwik_plugin.id %>">
    <% unless value_for_plugin_param(:piwik, :server_url).nil? %>
	<p>
      <span class="label">Server URL:</span>
      <span class="value"><%= value_for_plugin_param(:piwik, :server_url) %></span>
    </p>
	<% end %>
    <% unless value_for_plugin_param(:piwik, :account).nil? %>
    <p>
      <span class="label">Account ID:</span>
      <span class="value"><%= value_for_plugin_param(:piwik, :account) %></span>
    </p>
	<% end %>
  </div>
<% end %>

<% unless @tag_configuration.has_transport_plugins? %>
  <p>None</p>
<% end %>
  
</fieldset>

  <hr />

<% if !@tag_configuration.site_name.empty? %>
<fieldset id="comments">

  <h2>Comments</h2>
  <p id="site_name"><%= @tag_configuration.site_name %></p>

</fieldset>

  <hr />

<% end %>
  
<% if current_user.nil? %>
<p>
  Don't forget to <%= link_to 'register', :register %> or <%= link_to 'log in', :login %> to save the configuration.
</p>
<% end %>

<% if @tag_configuration.new_record? %>
    <div class="button edit"><%= link_to 'Edit configuration', edit_new_tag_configuration_path %></div>
<% else %>

  <div class="yui-g actions">
    <div class="yui-u first">
      <div class="button edit"><%= link_to 'Edit configuration', edit_tag_configuration_path(@tag_configuration) %></div>
    </div>
    <div class="yui-u">
      <div class="button delete"><%= link_to 'Delete', @tag_configuration, :confirm => 'Are you sure?', :method => :delete %></div>
    </div>
  </div>
  
<% end %>

