
<h1>Your Tag Configurations</h1>

<fieldset id="config_listing">

<% if @user.nil? %>

  <div class="button create"><%= link_to 'Create a new configuration', new_tag_configuration_path %></div>

  <p>You can save any configuration when you are logged in.</p>

<% else %>


  <% unless @saved_configurations.empty? %>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Plugins</th>
        <th>Comments</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
    <% for config in @saved_configurations %>
      <tr class="<%= cycle('row-odd', 'row-even') %>">
        <td class="config_name"><%= link_to config.name, config %></td>
        <td>
          <%
            plugins = config.plugins.map(&:name).to_sentence.gsub("Causata", "#{APP_CONFIG[:configurator][:plugin1][:name]}") 
            plugins.gsub!("Piwik", "#{APP_CONFIG[:configurator][:plugin2][:name]}") 
          %>
          <%= plugins %>
        </td>
        <td class="site_name"><%= config.site_name %></td>
        <td>

          <div class="yui-g">
            <div class="yui-u first">
              <div class="icon edit" title="Edit"><%= link_to 'Edit', edit_tag_configuration_path(config) %></div>
            </div>
            <div class="yui-u">
              <div class="icon delete" title="Delete"><%= link_to 'Delete', config, :confirm => 'Are you sure?', :method => :delete %></div>
            </div>
          </div>

        </td>
      </tr>
    <% end %>
    </tbody>
    </table>
  <% end %>
  <div class="button new"><%= link_to 'Create a new configuration', new_tag_configuration_path %></div>

<% end #if @user %>

</fieldset>

